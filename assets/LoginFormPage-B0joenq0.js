import{d as V,r as u,c as k,b as o,w as n,a as i,u as y,l as x,j as c,N as B,f as F,o as S,g as m,R as C,F as N}from"./index-Al1ESLyH.js";import{C as h}from"./index-DJB-JNsy.js";import{F as L}from"./index-Cb0lWyr4.js";import{B as R}from"./index-dW7UAVpM.js";const U={class:"container"},j={class:"button-cell m-4"},q={class:"tips flex justify-end mx-5"},H=V({__name:"LoginFormPage",setup(I){const p=F(),r=u(""),l=u(""),t=u(!1),_=()=>{r.value="",l.value=""},f=async a=>{t.value=!0;try{const{data:e}=await x({username:a.account,password:a.password});c.setSessionStorage("token",e.token),c.setSessionStorage("userInfo",e.user_info),c.syncInfoToUserStore(),t.value=!1,_(),p.push("/")}catch(e){console.error(e),t.value=!1}};return(a,e)=>{const v=B,d=N,g=h,b=R,w=L;return S(),k("div",U,[o(v,{title:"登录","left-arrow":"",onClickLeft:e[0]||(e[0]=s=>a.$router.back())}),o(w,{onSubmit:f},{default:n(()=>[o(g,{inset:""},{default:n(()=>[o(d,{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=s=>r.value=s),name:"account",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},null,8,["modelValue"]),o(d,{modelValue:l.value,"onUpdate:modelValue":e[2]||(e[2]=s=>l.value=s),type:"password",name:"password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"])]),_:1}),i("div",j,[o(b,{round:"",block:"",loading:t.value,type:"primary","native-type":"submit"},{default:n(()=>[m(" 登录 ")]),_:1},8,["loading"])])]),_:1}),i("div",q,[o(y(C),{class:"text-blue-500",to:"/register"},{default:n(()=>[m("没有账号，去注册")]),_:1})])])}}});export{H as default};
