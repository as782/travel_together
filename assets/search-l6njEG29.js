import{ay as g,az as h,r as l,A as o}from"./index-Al1ESLyH.js";import{a as y}from"./tool-DO7ubHTV.js";const p=r=>g.get(`/search?keyword=${r}`),w=h("search",()=>{const r=l({status:"idle",error:null,data:{dynamicPosts:[],teamActivityPosts:[],users:[]}}),c=o(()=>r.value.data.teamActivityPosts.map(e=>{var s;const{user_info:a,joinMans:t}=e;return{userInfo:{user_id:(a==null?void 0:a.user_id)??0,nickname:(a==null?void 0:a.nickname)??"Unkonw",avatar_url:(a==null?void 0:a.avatar_url)??"",likeFans:t},card_id:e.post_id,desc:e.title,condition:{destination:[e.start_location,e.end_location],time:`${e.duration_day}`},cover_imgUrl:((s=e.images[0])==null?void 0:s.image_url)||"",createTime:e.created_at||void 0}})||[]),n=l([]),u=o(()=>r.value.data.users.map(e=>{const{user_id:a,avatar_url:t,nickname:s,birthday:m,gender:d,isFollow:_}=e;return{user_id:a,avatar:t,nickname:s,birthday:`${y(m)}`,gender:d==="male"?"男":d==="female"?"女":"其他",isFollow:_}})||[]),i=o(()=>c.value.length+n.value.length+u.value.length);async function v(e){try{r.value.status="loading";const a=await p(e);r.value.data=a.data,n.value=r.value.data.dynamicPosts.map(t=>({card_id:t.dynamic_post_id,userInfo:t.user_info,content:{desc:t.content,images:t.images},isFollow:t.isFollowed,isLike:t.isLiked,likeCount:t.like_count,commentCount:t.comment_count,createTime:t.created_at}))||[],r.value.status="succeeded"}catch(a){console.error(a),r.value.status="failed",r.value.error="搜索失败"}}return{searchResultData:r,groupCardDataList:c,momentCardDataList:n,userCardDataList:u,dataConunt:i,getSearchResultData:v}});export{w as u};
