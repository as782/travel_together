import{d as M,G as k,r as u,v as N,c as r,b as v,w as x,f as S,o,D as A,C as P,B as E,a as c,E as f,u as _,a3 as L,aS as b}from"./index-Al1ESLyH.js";import{L as w}from"./index-DVp0JOWu.js";import{c as D,M as t}from"./index-BXhODArz.js";import{g as Y}from"./tool-DO7ubHTV.js";import{I as V}from"./index-o3mCI9mj.js";import"./use-tab-status-CfkwxFsA.js";const F=["onClick"],z={class:"flex"},K={class:"flex-1 p-2 mx-4 rounded-lg shadow-lg shadow-slate-200"},B={class:"flex flex-col"},$={class:"flex"},U={class:"mx-2 text-violet-400"},W={key:0,class:"text-sm text-black font-semibold text-left"},q={key:1,class:"text-sm text-black font-semibold text-left"},G={key:2,class:"text-sm text-black font-semibold text-left"},R={key:3,class:"text-sm text-black font-semibold text-left"},j={key:4,class:"text-sm text-black font-semibold text-left"},H={key:5,class:"text-sm text-black font-semibold text-left"},J={key:0,class:"info text-left my-2 active-desc"},Q={class:"user-state text-xs text-right text-gray-500"},le=M({__name:"aboutMomentPage",setup(X){const p=S(),g=k(),I=u(!1),T=u(!1);N(()=>{m()});const a=u({currentPage:1,pageSize:10,total:-1});function h(n){switch(t.DYNAMIC_POST_COMMENT,n){case t.DYNAMIC_POST_COMMENT:return"dynamic_post";case t.DYNAMIC_POST_LIKE:return"dynamic_post";case t.TEAM_ACTIVITY_POST_COMMENT:return"team_post";case t.TEAM_ACTIVITY_POST_LIKE:return"team_post";case t.FOLLOW_NOTIFICATION:return"user";default:return"user"}}const i=u([]),m=async()=>{var d;a.value.total!=-1&&a.value.total<=(a.value.currentPage-1)*a.value.pageSize&&await Promise.resolve();const n={page:a.value.currentPage,limit:a.value.pageSize,user_id:(d=g.userInfo)==null?void 0:d.user_id},s=await D(n);i.value=i.value.concat(s.data.list.map(l=>({id:l.id,senderInfo:l.senderInfo,content:l.content,related_id:l.related_id,related_type:l.type,image:l.image,create_time:Y(l.created_at)})).reverse()),a.value.total=s.data.totalCount,a.value.currentPage=s.data.currentPage,a.value.pageSize=s.data.pageSize,a.value.total===i.value.length&&(T.value=!0)},y=async()=>{a.value.currentPage++,await m(),I.value=!1},C=n=>{const s=h(n.related_type);s==="dynamic_post"?p.push(`/momentDetail/${n.related_id}`):s==="team_post"?p.push(`/groupDetail/${n.related_id}`):s==="user"&&p.push(`/user/${n.senderInfo.user_id}`)};return(n,s)=>{const d=V,l=b,O=w;return o(),r("main",null,[v(O,{loading:I.value,"onUpdate:loading":s[0]||(s[0]=e=>I.value=e),finished:T.value,"finished-text":"没有更多了",onLoad:y},{default:x(()=>[(o(!0),r(A,null,P(i.value,e=>(o(),E(l,{key:e.id,border:!0,size:"large"},{default:x(()=>[c("div",{class:"sys-info flex items-center my-1",onClick:Z=>C(e)},[c("span",z,[v(d,{src:e.senderInfo.avatar_url,class:"flex-none w-10 aspect-square shadow-lg shadow-slate-400",round:"",fit:"cover"},null,8,["src"])]),c("div",K,[c("div",B,[c("div",$,[c("span",U,f(e.senderInfo.nickname),1),e.related_type===_(t).FOLLOW_NOTIFICATION?(o(),r("h4",W,f(e.content==="关注"?"关注了你❤️💖":"取消对你的关注💔"),1)):e.related_type===_(t).TEAM_ACTIVITY_POST_COMMENT?(o(),r("h4",q," 评论了你的组队☕ ")):e.related_type===_(t).DYNAMIC_POST_COMMENT?(o(),r("h4",G," 评论了你的动态☕ ")):e.related_type===_(t).TEAM_ACTIVITY_POST_LIKE?(o(),r("h4",R," 点赞了你的组队👍🤩 ")):e.related_type===_(t).DYNAMIC_POST_LIKE?(o(),r("h4",j," 点赞了你的动态👍🤩 ")):(o(),r("h4",H," ???? "))]),e.related_type!==_(t).FOLLOW_NOTIFICATION&&e.related_type!==_(t).TEAM_ACTIVITY_POST_LIKE&&e.related_type!==_(t).DYNAMIC_POST_LIKE?(o(),r("div",J,[c("p",null,f(e.content),1)])):L("",!0),c("span",Q,f(e.create_time),1)])])],8,F)]),_:2},1024))),128))]),_:1},8,["loading","finished"])])}}});export{le as default};
